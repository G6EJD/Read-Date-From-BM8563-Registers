String getRTCDateTimeString() 
{
   char       buff[32];
   rtc_date_t date_struct;
   rtc_time_t time_struct;
   
   M5.RTC.getDate(&date_struct);
   M5.RTC.getTime(&time_struct);

   sprintf(buff,"%02d.%02d.%04d %02d:%02d:%02d",
      date_struct.day,  date_struct.mon, date_struct.year,
      time_struct.hour, time_struct.min, time_struct.sec);

   return (String) buff;
}

/* Read the RTC timestamp */
time_t GetRTCTime()
{
  tmElements_t tmSet;
  rtc_date_t   date_struct;
  rtc_time_t   time_struct;
   
  M5.RTC.getDate(&date_struct);
  M5.RTC.getTime(&time_struct);
  
  tmSet.Year   = date_struct.year - 1970;
  tmSet.Month  = date_struct.mon;
  tmSet.Day    = date_struct.day;
  tmSet.Hour   = time_struct.hour;
  tmSet.Minute = time_struct.min;
  tmSet.Second = time_struct.sec;
  
  return makeTime(tmSet);
}

/* Convert the date part of the RTC timestamp */
String getRTCDateString() 
{
   char       buff[32];
   rtc_date_t date_struct;
   
   M5.RTC.getDate(&date_struct);

   sprintf(buff,"%02d.%02d.%04d",
      date_struct.day,  date_struct.mon, date_struct.year);

   return (String) buff;
}

/* Convert the time part of the RTC timestamp */
String getRTCTimeString() 
{
   char       buff[32];
   rtc_time_t time_struct;
   
   M5.RTC.getTime(&time_struct);

   sprintf(buff,"%02d:%02d:%02d",      
      time_struct.hour, time_struct.min, time_struct.sec);

   return (String) buff;
}

/* Convert the time_t to the DD.MM.YYYY HH:MM:SS format */
String getDateTimeString(time_t rawtime)
{
   char buff[32];
   
   sprintf(buff,"%02d.%02d.%04d %02d:%02d:%02d",
      day(rawtime), month(rawtime), year(rawtime),
      hour(rawtime), minute(rawtime), second(rawtime));

   return (String) buff;
}

/* Convert the time_t to the date part DD.MM.YYYY */
String getDateString(time_t rawtime)
{
   char buff[32];
   
   sprintf(buff,"%02d.%02d.%04d",
      day(rawtime), month(rawtime), year(rawtime));

   return (String) buff;
}

/* Convert the time_t to the time part HH:MM:SS format */
String getTimeString(time_t rawtime)
{
   char buff[32];
   
   sprintf(buff,"%02d:%02d:%02d",
      hour(rawtime), minute(rawtime), second(rawtime));

   return (String) buff;
}

/* Convert the hour of the time_t */
String getHourString(time_t rawtime)
{
   char buff[32];
   
   sprintf(buff,"%02d",
      hour(rawtime));

   return (String) buff;
}

/* Convert the minute of the time_t */
String getHourMinString(time_t rawtime)
{
   char buff[32];
   
   sprintf(buff,"%02d:%02d",
      hour(rawtime), minute(rawtime));

   return (String) buff;
}
